!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("async-validator"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","async-validator","prop-types"],t):"object"==typeof exports?exports.form=t(require("react"),require("async-validator"),require("prop-types")):e.form=t(e.React,e.Schema,e.PropTypes)}(window,function(r,n,a){return function(r){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=r,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=8)}([function(e,t){e.exports=r},function(e,t,r){var n=r(4);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(6)(n,a);n.locals&&(e.exports=n.locals)},function(e,t){e.exports=n},function(e,t){e.exports=a},function(e,t,r){(e.exports=r(5)(!1)).push([e.i,".configurable-form-area .form-item-wrap {\n  width: 350px;\n  margin-bottom: 18px;\n  position: relative;\n}\n.configurable-form-area .form-item-wrap .form-group {\n  display: flex;\n  align-items: center;\n}\n.configurable-form-area .form-item-wrap .form-group .label {\n  color: rgba(0, 0, 0, 0.85);\n  font-size: 13px;\n  display: inline-block;\n  flex: none;\n}\n.configurable-form-area .form-item-wrap .form-group .label span {\n  display: inline-block;\n  width: 100px;\n  text-align: right;\n  position: relative;\n  top: -2px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: middle;\n}\n.configurable-form-area .form-item-wrap .form-group .label.higher {\n  align-self: flex-start;\n  position: relative;\n  top: 6px;\n}\n.configurable-form-area .form-item-wrap .form-group .form-item {\n  padding: 4px 11px;\n  flex: 1 1 auto;\n  min-width: 0;\n  display: inline-block;\n  font-size: 13px;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  background-color: #fff;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n}\n.configurable-form-area .form-item-wrap .form-group .form-item:hover {\n  border-color: #40a9ff;\n}\n.configurable-form-area .form-item-wrap .form-group .form-item:focus {\n  outline: 0;\n  border-color: #40a9ff;\n  box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);\n}\n.configurable-form-area .form-item-wrap .form-group .form-item.error-style {\n  border-color: #f56c6c !important;\n  box-shadow: none !important;\n}\n.configurable-form-area .form-item-wrap .form-group .input-component,\n.configurable-form-area .form-item-wrap .form-group .select-component {\n  height: 32px;\n}\n.configurable-form-area .form-item-wrap .form-group .textarea-component {\n  height: 100px;\n}\n.configurable-form-area .form-item-wrap .form-group .option-item {\n  display: block;\n  padding: 5px 12px;\n  line-height: 22px;\n  font-weight: 400;\n  color: rgba(0, 0, 0, 0.65);\n  white-space: nowrap;\n  cursor: pointer;\n}\n.configurable-form-area .form-item-wrap .form-group .operation-btn-area {\n  display: inline-block;\n}\n.configurable-form-area .form-item-wrap .form-group .operation-btn-area .operation-btn {\n  margin-left: 10px;\n  color: #4AB2FF;\n  font-size: 12px;\n  cursor: pointer;\n}\n.configurable-form-area .form-item-wrap .message-hint-area {\n  position: absolute;\n  right: 0;\n  height: 15px;\n  bottom: -14px;\n  font-size: 12px;\n  color: #f56c6c;\n  margin: 0;\n}\n.configurable-form-area ::-webkit-input-placeholder {\n  color: #aaa;\n  font-size: 13px;\n}\n.configurable-form-area ::-moz-placeholder {\n  color: #aaa;\n  font-size: 13px;\n}\n",""])},function(e,t){e.exports=function(r){var i=[];return i.toString=function(){return this.map(function(e){var t=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(i=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),o=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[r].concat(o).concat([a]).join("\n")}var i;return[r].join("\n")}(e,r);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},i.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},n=0;n<this.length;n++){var a=this[n][0];"number"==typeof a&&(r[a]=!0)}for(n=0;n<e.length;n++){var o=e[n];"number"==typeof o[0]&&r[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),i.push(o))}},i}},function(e,t,n){var r,a,o,c={},f=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===a&&(a=r.apply(this,arguments)),a}),i=(o={},function(e,t){if("function"==typeof e)return e();if(void 0===o[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}o[e]=r}return o[e]}),l=null,u=0,s=[],p=n(7);function d(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=c[n.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](n.parts[o]);for(;o<n.parts.length;o++)a.parts.push(b(n.parts[o],t))}else{var i=[];for(o=0;o<n.parts.length;o++)i.push(b(n.parts[o],t));c[n.id]={id:n.id,refs:1,parts:i}}}}function m(e,t){for(var r=[],n={},a=0;a<e.length;a++){var o=e[a],i=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[i]?n[i].parts.push(s):r.push(n[i]={id:i,parts:[s]})}return r}function y(e,t){var r=i(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=s[s.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),s.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=i(e.insertAt.before,r);r.insertBefore(t,a)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=s.indexOf(e);0<=t&&s.splice(t,1)}function g(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return v(t,e.attrs),y(e,t),t}function v(t,r){Object.keys(r).forEach(function(e){t.setAttribute(e,r[e])})}function b(t,e){var r,n,a,o,i,s;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var c=u++;r=l||(l=g(e)),n=A.bind(null,r,c,!1),a=A.bind(null,r,c,!0)}else a=t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=e,s=document.createElement("link"),void 0===i.attrs.type&&(i.attrs.type="text/css"),i.attrs.rel="stylesheet",v(s,i.attrs),y(i,s),n=function(e,t,r){var n=r.css,a=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&a;(t.convertToAbsoluteUrls||o)&&(n=p(n));a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}.bind(null,r=s,e),function(){h(r),r.href&&URL.revokeObjectURL(r.href)}):(r=g(e),n=function(e,t){var r=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),function(){h(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else a()}}e.exports=function(e,i){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(i=i||{}).attrs="object"==typeof i.attrs?i.attrs:{},i.singleton||"boolean"==typeof i.singleton||(i.singleton=f()),i.insertInto||(i.insertInto="head"),i.insertAt||(i.insertAt="bottom");var s=m(e,i);return d(s,i),function(e){for(var t=[],r=0;r<s.length;r++){var n=s[r];(a=c[n.id]).refs--,t.push(a)}e&&d(m(e,i),i);for(r=0;r<t.length;r++){var a;if(0===(a=t[r]).refs){for(var o=0;o<a.parts.length;o++)a.parts[o]();delete c[a.id]}}}};var w,F=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function A(e,t,r,n){var a=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=F(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,o=a+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r,n=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?e:(r=0===n.indexOf("//")?n:0===n.indexOf("/")?a+n:o+n.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(e,t,r){"use strict";r.r(t);var n=r(0),g=r.n(n),y=function t(r){if(Array.isArray(r))return r.map(function(e){return t(e)});if(r instanceof Object){var e=Object.keys(r),n={};return e.forEach(function(e){n[e]=t(r[e])}),n}return r},v=function(e){if(!e||!Array.isArray(e)||0===e.length||!e.includes("assistData"))return[];var r=e.indexOf("assistData");return e.filter(function(e,t){return r<t})},d=function(e,t){if(e&&Array.isArray(t)){if(0===t.length)return{dataWrap:e,lastKey:""};if(1===t.length)return{dataWrap:e,lastKey:t[0]};for(var r=t[0],n=e,a=t[t.length-1],o=1;o<t.length;o++){n=n&&n[r]||{};var i=t[o];if(!(n&&n[i]&&n[i]instanceof Object))break;r=i}return{dataWrap:n,lastKey:a}}return{dataWrap:e,lastKey:t}},b=function(e,t){if(!e||!e instanceof Object||!t||!Array.isArray(t)||0===t.length)return{lastData:e,lastKey:t};var r=e,n=t[0];return t.forEach(function(e){r=r&&r[e],n=e}),{lastData:r,lastKey:n}},a=r(2),o=r.n(a),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=[{type:"string",msg:"必须为字符串"},{type:"number",msg:"必须为数字"},{type:"required",msg:"值不能为空"},{type:"boolean",msg:"必须为bool值"},{type:"integer",msg:"必须为整数型"},{type:"float",msg:"必须为浮点型"},{type:"enum",mag:"不在规定范围内"},{type:"date",msg:"必须为日期类型"},{type:"email",msg:"邮箱格式不正确"}],p=function(e){function r(e){s(this,r);var t=c(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return m.call(t),t.state={rules:{},validator:null},t}return f(r,n["Component"]),i(r,[{key:"componentDidMount",value:function(){this.refresh(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.config&&e.config!==this.props.config&&this.refresh(e)}},{key:"render",value:function(){return g.a.createElement("div",{className:"Validator"},this.props.children)}}]),r}(),m=function(){var f=this;this.refresh=function(e){var t=(e||f.props).config,r=f.state.rules,n=f.getRules(t,e||f.props);f.setState({rules:l({},r,n)},f.createValidator)},this.createValidator=function(){var e=f.state.rules,t=new o.a(e);f.setState({validator:t})},this.refreshValid=function(e,t){var r=f.state.rules;if(Array.isArray(e)&&Array.isArray(t.validate)){var n=f.analyValidate(t);f.addDeepValidator(r,e,n)}f.setState({rules:r},f.createValidator)},this.getRules=function(e,i){if(!e||!Array.isArray(e))return{};var s=f.state.rules,c=[];return e.forEach(function(e){if(c=e.dataKey&&e.dataKey.includes(".")?e.dataKey.split("."):e.dataKey?[e.dataKey]:[],e.dataKey&&e.validate&&Array.isArray(e.validate)){var t=f.analyValidate(e);f.addDeepValidator(s,c,t)}if(Array.isArray(e.children)){var r=i.data,n=f.getRules(e.children),a={type:"array",fields:{}},o=b(r,c).lastData;o&&Array.isArray(o)&&o.forEach(function(e,t){a.fields[t]={type:"object",fields:l({},n)}}),f.addDeepValidator(s,c,a)}}),s},this.analyValidate=function(n){if(!n.validate||!Array.isArray(n.validate)||0===n.validate.length)return[];var a=[];return n.validate.forEach(function(t){if("string"==typeof t){var e=u.find(function(e){return e.type===t});e&&a.push({type:e.type,required:"required"===e.type,message:""+(n.label?n.label:"")+e.msg})}if(t instanceof Object&&t.type){var r=u.find(function(e){return e.type===t.type});r&&a.push(l({type:r.type,required:"required"===r.type,message:""+(n.label?n.label:"")+r.msg},t))}t instanceof RegExp&&a.push({pattern:t,message:(n.label?n.label:"")+"格式不正确"}),t instanceof Function&&a.push({validator:t})}),a},this.addDeepValidator=function(e,t,r){if(e&&!(!e instanceof Object)&&Array.isArray(t)&&0!==t.length){for(var n=t.length,a=t[n-1],o=e,i=t[0],s=1;s<n;s++){var c=t[s];o[i]&&o[i].fields||(o[i]={type:parseInt(c)==c?"array":"object",fields:{}}),o=o[i].fields,i=c}o[a]=r}},this.validate=function(e,s,c){var t=f.state.validator;if(t&&e){var r={firstFields:!Array.isArray(s)||[s.join(".")]};t.validate(e,r,function(e,t){if(e&&t){var r=t;if(Array.isArray(s)){var n=s.join(".");a={},i=t[o=n],o in a?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i,r=a}f.props.setErrors(r,c)}else void 0===s?f.props.cancelErrors(c):c&&c instanceof Function&&c();var a,o,i})}}},h=p,w=function(e){function r(e){s(this,r);var t=c(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={},t}return f(r,n["Component"]),i(r,[{key:"render",value:function(){var e=this.props.error;return g.a.createElement("div",null,this.props.children,e&&0<e.length&&g.a.createElement("p",{className:"message-hint-area"},e[0].message))}}]),r}(),F=(r(1),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}),A=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=function(e){function o(){var e,t,h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return(t=h=x(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(n)))).handleChange=function(r,e,t,a,n){a&&a.modifyDataFn&&a.modifyDataFn instanceof Function?a.modifyDataFn({changeFn:function(e,t){h.modifyDataFn(r,e,a,t)},changeDataFn:function(e,t,r){if(e){var n=[];n=e.includes(".")?e.split("."):[e],h.modifyDataFn(n,t,a,r)}else h.modifyAllData(t,a,r)}},n):h.modifyDataFn(r,e,a,t)},h.modifyAllData=function(e,t,r){var n=h.props,a=n.submitFn,o=n.totalConfig;h.props.modifyAllData(e,function(e){o.realTimeSubmit&&!t.preventSubmit&&a&&a instanceof Function&&a(e),r&&r instanceof Function&&r(e)})},h.modifyDataFn=function(e,t,r,n){var a=h.props,o=a.submitFn,i=a.totalConfig;h.props.modifyFn(e,t,function(e){i.realTimeSubmit&&!r.preventSubmit&&o&&o instanceof Function&&o(e),n&&n instanceof Function&&n(e)})},h.loseFocus=function(e){h.props.loseFocusFn(e)},h.getFocus=function(e){h.props.getFocusFn(e)},h.handleAddItem=function(e,t){var r=h.props.data,n=b(r,e).lastData;Array.isArray(n)&&n.push(t.addItem),h.props.modifyAllData(r)},h.deleteItem=function(e,t){var r=h.props.data,n=b(r,e).lastData;Array.isArray(n)&&n.splice(t,1),h.props.modifyAllData(r)},h.getCustomFormItem=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=arguments[3],a=_.customComponents.find(function(e){return e.type===t.type});if(a){var o=F({},a,t,{type:"container"});return h.getFormItem(o,e,r,n)}return h.getFormItem(t,e,r,n)},h.validFormItemConfig=function(e){},h.getFormItem=function(o,e){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},t=h.props,r=t.error,n=t.assistData,s=o.type||"input";h.validFormItemConfig(o);var c=o.dataKey,f=e;if(c&&c.includes(".")?c.split(".").forEach(function(e){a.push(e),e&&f&&(f=f[e])}):(a.push(c),f=f&&f[c]),Array.isArray(a)&&a.includes("assistData")){var l=v(a),u=b(n,l).lastData;f=u}var p=Array.isArray(a)?a.join("."):o.dataKey,d=r[p]?"error-style":"",m={input:g.a.createElement("input",{className:"input-component form-item "+d,value:f,placeholder:o.placeholder||"",onFocus:function(){return h.getFocus(a)},onBlur:function(){return h.loseFocus(a)},onChange:function(e){return h.handleChange(a,e.target.value,function(){},o)}}),textarea:g.a.createElement("textarea",{className:"textarea-component form-item "+d,value:f,placeholder:o.placeholder||"",onBlur:function(){return h.loseFocus(a)},onFocus:function(){return h.getFocus(a)},onChange:function(e){return h.handleChange(a,e.target.value,function(){},o)}}),select:g.a.createElement("select",{className:"select-component form-item "+d,value:f,onClick:function(){return h.getFocus(a)},onChange:function(e){h.handleChange(a,e.target.value,function(e){h.loseFocus(a)},o)}},Array.isArray(o.options)&&o.options.map(function(e,t){var r="string"==typeof e?e:e.label,n="string"==typeof e?e:e.value;return g.a.createElement("option",{key:t,className:"option-item",value:n},r)})),form_array:g.a.createElement("div",{className:"form-list-area"},Array.isArray(f)&&f.map(function(e,n){return g.a.createElement("div",{key:n,className:"form-list"},o.children&&o.children.map(function(e,t){var r=[].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(a),[n]);return g.a.createElement(g.a.Fragment,{key:t},h.getFormItemWrap(e,f[n],r,{childType:"children",index:n,parentKey:o.dataKey,parentData:f,parentConfig:o}))}),!o.hideBtn&&g.a.createElement("div",{className:"operation-btn-area"},n===f.length-1&&g.a.createElement("span",{className:"operation-btn",onClick:function(){return h.handleAddItem(a,o)}},"添加"),1<f.length&&g.a.createElement("span",{className:"operation-btn",onClick:function(){return h.deleteItem(a,n)}},"删除")))})),container:g.a.createElement(g.a.Fragment,null,o.render&&o.render(f,F({},o,i),{changeFn:function(e,t){var r={parent:i,self:F({},o,{curData:e,preData:f}),data:h.props.data};h.handleChange(a,e,t,o,r)},changeDataFn:function(e,t,r){var n={parent:i,self:F({},o,{curData:t,preData:f}),data:h.props.data};if(e){var a=[];a=e.includes(".")?e.split("."):[e],h.handleChange(a,t,r,o,n)}else h.modifyAllData(t,o,r)},getFocus:function(){h.getFocus(a)},loseFocus:function(){h.loseFocus(a)},JSONForm:function(e){return e&&Array.isArray(e)&&0!==e.length?e.map(function(e,t){var r=y(a);return e.dataKey&&e.dataKey.includes(".")?r=r.concat(e.dataKey.split(".")):e.dataKey&&r.push(e.dataKey),h.props.refreshValid(r,e),g.a.createElement(g.a.Fragment,{key:t},h.getFormItemWrap(e,f,y(a),{childType:"children",parentKey:o.dataKey,parentData:f,parentConfig:o}))}):""},error:r[p],assistData:h.props.assistData,data:h.props.data}))};return m[s]||m.input},h.getFormItemWrap=function(e,t,r,n){var a=h.props,o=a.error,i=a.totalStyle,s=void 0===i?{}:i,c=s.label||{},f=(e.style||{}).label||{},l=F({},c,f),u=s.wrap||{},p=(e.style||{}).wrap||{},d=F({},u,p),m=g.a.createElement("div",{className:"form-group"},e&&e.label&&g.a.createElement("label",{className:["textarea","form_array"].includes(e.type)?"label higher":"label"},g.a.createElement("span",{style:l},e.label||"","：")),h.getCustomFormItem(e,t,r,n));if(n&&"children"===n.childType){var y=Array.isArray(r)?r.join("."):e.dataKey;return g.a.createElement("div",{className:"form-item-wrap",style:d},g.a.createElement(w,{error:o[y]},m))}return m},x(h,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n["Component"]),A(o,[{key:"render",value:function(){var e=this.props,t=e.config,r=e.data;return this.getFormItemWrap(t,r,[])}}]),o}(),j=r(3),E=r.n(j),D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var C=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return K.call(t),t.state={data:y(e.config.data)||{},assistData:y(e.config.assistData)||{},errors:{}},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n["Component"]),S(r,[{key:"componentDidMount",value:function(){this.getStoreData(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.config&&e.config!==this.props.config&&this.getStoreData(e)}},{key:"render",value:function(){var o=this,i=this.props.config,e=this.state,s=e.data,c=e.assistData,f=e.errors;return g.a.createElement("div",{className:"configurable-form-area "+(i.className?i.className:"")},g.a.createElement(h,{config:i.config,setErrors:this.setErrors,cancelErrors:this.cancelErrors,data:s,ref:function(e){return o.validator=e}},Array.isArray(i.config)&&i.config.map(function(e,t){var r=(i.style||{}).wrap||{},n=(e.style||{}).wrap||{},a=D({},r,n);return g.a.createElement("div",{className:"form-item-wrap",key:t,style:a},g.a.createElement(w,{error:f[e.dataKey]},g.a.createElement(O,{totalConfig:i,totalStyle:i.style,config:e,data:s,assistData:c,modifyAllData:o.modifyAllData,modifyFn:o.modifyFn,submitFn:o.submitFn,refreshValid:o.refreshValid,loseFocusFn:o.handleLoseFocusFn,error:f,getFocusFn:o.handleGetFocusFn})))})))}}]),r}();C.propTypes={config:E.a.object},C.defaultProps={config:{data:{},config:[]}},C.customComponents=[],C.createCustomComp=function(e){e&&Array.isArray(e)&&e.forEach(function(t){t.render&&t.type&&C.customComponents.every(function(e){return e.type!==t.type})&&C.customComponents.push(t)})};var K=function(){var p=this;this.getStoreData=function(e){var t=e.config;if(t.formKey&&"string"==typeof t.formKey){var r=window.localStorage.getItem(t.formKey),n={};try{n=JSON.parse(r)||{}}catch(e){console.log(e)}var a=D({},y(e.config.data),n);p.setState({data:a},function(){p.validator.refresh()})}},this.modifyFn=function(e,t,r){var n=p.state,a=n.data,o=n.assistData,i=p.props.config,s=y(a),c=y(o);if(Array.isArray(e)&&e.includes("assistData")){var f=v(e),l=d(c,f);l.dataWrap[l.lastKey]=t}else{var u=d(s,e);u.dataWrap[u.lastKey]=t}p.setState({data:s,assistData:c},function(){i.formKey&&"string"==typeof i.formKey&&window.localStorage.setItem(i.formKey,JSON.stringify(p.state.data)),r&&r instanceof Function&&r(p.state.data)})},this.modifyAllData=function(e,t){var r=p.props.config;p.setState({data:e},function(){p.validator.refresh(),r.formKey&&"string"==typeof r.formKey&&window.localStorage.setItem(r.formKey,JSON.stringify(p.state.data)),t&&t instanceof Function&&t(p.state.data)})},this.realSubmit=function(e,t){p.props.config.realTimeSubmit&&p.submitFn&&p.submitFn instanceof Function&&p.submitFn(t),e&&e instanceof Function&&e(t)},this.modifyDataFn=function(e){e&&e instanceof Function&&e(p.state.data,p.modifyKeyValue)},this.modifyKeyValue=function(e,t,r){if(e){var n=[];n=e.includes(".")?e.split("."):[e],p.modifyFn(n,t,function(e){p.realSubmit(r,e)})}else p.modifyAllData(data,function(e){p.realSubmit(r,e)})},this.getValue=function(n){p.validator.validate(p.state.data,void 0,function(){var e=p.state,t=e.errors,r=e.data;n&&n instanceof Function&&n("{}"===JSON.stringify(t),r)})},this.registerSubmit=function(n){p.submitFn=function(e){p.validator.validate(e,void 0,function(){var e=p.state,t=e.errors,r=e.data;n&&n instanceof Function&&n("{}"===JSON.stringify(t),r)})}},this.handleLoseFocusFn=function(e){p.validator.validate(p.state.data,e)},this.handleGetFocusFn=function(e){var t=p.state.errors,r=Array.isArray(e)?e.join("."):"";t[r]&&(t[r]=void 0,p.setState({errors:t}))},this.setErrors=function(e,t){var r=p.state.errors;p.setState({errors:D({},r,e)},function(){t&&t instanceof Function&&t()})},this.cancelErrors=function(e){p.setState({errors:{}},function(){e&&e instanceof Function&&e()})},this.refreshValid=function(e,t){p.validator?p.validator.refreshValid(e,t):setTimeout(function(){p.refreshValid(e,t)},10)}},_=C;t.default=_}])});