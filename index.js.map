{"version":3,"file":"index.js","sources":["src/Form/utils/common.js","src/Form/Validator.jsx","node_modules/style-inject/dist/style-inject.es.js","src/Form/FormItem.jsx","src/Form/index.jsx"],"sourcesContent":["// 深拷贝\nexport const cloneData = (data) => {\n    if(Array.isArray(data)){\n        return data.map(item => cloneData(item))\n    }else if(data instanceof Object){\n        const keys = Object.keys(data)\n        const newData = {}\n        keys.forEach(key => {\n            newData[key] = cloneData(data[key])\n        })\n        return newData\n    }else{\n        return data\n    }\n}\n// 获取assistData的key\nexport const getAssistDataKey = (keyList) => {\n    if(!keyList || !Array.isArray(keyList) || keyList.length === 0 || !keyList.includes('assistData')){\n        return []\n    }\n    const index = keyList.indexOf('assistData')\n    return keyList.filter((item, idx) => idx > index)\n}\n// 获取dataWrap\nexport const getDataWrap = (data, keyList) => {\n    if(data && Array.isArray(keyList)){\n        if(keyList.length === 0){\n            return {\n                dataWrap: data,\n                lastKey: ''\n            }\n        }else if(keyList.length === 1){\n            return {\n                dataWrap: data,\n                lastKey: keyList[0]\n            }\n        }else {\n            let preKey = keyList[0], dataWrap = data, lastKey = keyList[keyList.length - 1]\n            for(let i = 1; i < keyList.length; i++){\n                dataWrap = (dataWrap && dataWrap[preKey]) || {}\n                let curKey = keyList[i]\n                if(dataWrap && dataWrap[curKey] && dataWrap[curKey] instanceof Object){\n                    preKey = curKey\n                }else {\n                    break\n                }\n            }\n            return {\n                dataWrap,\n                lastKey,\n            }\n        }\n    }else {\n        return {\n            dataWrap: data,\n            lastKey: keyList\n        }\n    }\n}\n\n// 获取lastkey及其值\nexport const getLastKeyValue = (data, keyList) => {\n    if(!data || !data instanceof Object || !keyList || !Array.isArray(keyList) || keyList.length === 0){\n        return {\n            lastData: data,\n            lastKey: keyList,\n        }\n    }\n    let lastData = data, lastKey = keyList[0]\n    keyList.forEach(key => {\n        lastData = lastData && lastData[key]\n        lastKey = key\n    })\n    return {\n        lastData,\n        lastKey,\n    }\n}","import React, {Component} from 'react'\nimport Schema from 'async-validator'\nimport {getLastKeyValue} from './utils/common'\n\nconst rulesString = [\n    {type: 'string', msg: '必须为字符串'},\n    {type: 'number', msg: '必须为数字'},\n    {type: 'required', msg: '值不能为空'},\n    {type: 'boolean', msg: '必须为bool值'},\n    {type: 'integer', msg: '必须为整数型'},\n    {type: 'float', msg: '必须为浮点型'},\n    {type: 'enum', mag: '不在规定范围内'},\n    {type: 'date', msg: '必须为日期类型'},\n    {type: 'email', msg: '邮箱格式不正确'},\n]\nexport default class Validator extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            rules: {},\n            validator: null,\n        }\n    }\n    componentDidMount(){\n        this.refresh(this.props)\n    }\n    componentWillReceiveProps(nextProps){\n        if(nextProps.config && nextProps.config !== this.props.config){\n            this.refresh(nextProps)\n        }\n    }\n    // 重新解析规则\n    refresh = (props) => {\n        const {config} = props || this.props\n        const {rules} = this.state\n        const newRules = this.getRules(config, props || this.props)\n        this.setState({rules: {...rules, ...newRules}}, this.createValidator)\n       \n    }\n    // 创建validator\n    createValidator = () => {\n        const {rules} = this.state\n        const validator = new Schema(rules)\n        this.setState({validator,})\n    }\n    // 更新规则\n    refreshValid = (keyList, item) => {\n        const {rules} = this.state\n        if(Array.isArray(keyList) && Array.isArray(item.validate)){\n            const valid = this.analyValidate(item)\n            this.addDeepValidator(rules, keyList, valid)\n        }\n        this.setState({rules,}, this.createValidator)\n    }\n    // 解析出规则\n    getRules = (config, props) => {\n        if(!config || !Array.isArray(config)){\n            return {}\n        }\n        let {rules} = this.state\n        let keyList = []\n        config.forEach(item => {\n            if(item.dataKey && item.dataKey.includes('.')){\n                keyList = item.dataKey.split('.')\n            }else if(item.dataKey){\n                keyList = [item.dataKey]\n            }else{\n                keyList = []\n            }\n            if(item.dataKey && item.validate && Array.isArray(item.validate)){\n                const valid = this.analyValidate(item)\n                this.addDeepValidator(rules, keyList, valid)\n            }\n            if(Array.isArray(item.children)){\n                const {data} = props\n                const subRules = this.getRules(item.children)\n                const childRules = {\n                    type: 'array',\n                    fields: {}\n                }\n                const {lastData} = getLastKeyValue(data, keyList)\n                if(lastData && Array.isArray(lastData)){\n                    lastData.forEach((child, childIdx) => {\n                        childRules.fields[childIdx] = {\n                            type: 'object',\n                            fields: {...subRules}\n                        }\n                    })\n                }\n                this.addDeepValidator(rules, keyList, childRules)\n            }\n        })\n        return rules\n    }\n    // 解析validate字段\n    analyValidate = (item) => {\n        if(!item.validate || !Array.isArray(item.validate) || item.validate.length === 0){\n            return []\n        }\n        const valid = []\n        item.validate.forEach(child => {\n            if(typeof child === 'string'){\n                const rule = rulesString.find(subRule => subRule.type === child)\n                if(rule){\n                    valid.push({\n                        type: rule.type,\n                        required: rule.type === 'required',\n                        message: `${item.label ? item.label : ''}${rule.msg}`,\n                    })\n                }\n            }\n            if(child instanceof Object && child.type){\n                const rule = rulesString.find(subRule => subRule.type === child.type)\n                if(rule){\n                    valid.push({\n                        type: rule.type,\n                        required: rule.type === 'required',\n                        message: `${item.label ? item.label : ''}${rule.msg}`,\n                        ...child,\n                    })\n                }\n            }\n            // 正则表达式校验\n            if(child instanceof RegExp){\n                valid.push({\n                    pattern: child,\n                    message: `${item.label ? item.label : ''}格式不正确`\n                })\n            }\n            if(child instanceof Function){\n                valid.push({validator: child})\n            }\n        })\n        return valid\n    }\n    // 深层解析添加validator\n    addDeepValidator = (rules, keyList, valid) => {\n        if(!rules || !rules instanceof Object || !Array.isArray(keyList) || keyList.length === 0){\n            return\n        }\n        const len = keyList.length, lastKey = keyList[len - 1]\n        let dataWrap = rules, preKey = keyList[0]\n        for(let i = 1; i < len; i++){\n            let key = keyList[i]\n            if(!dataWrap[preKey] || !dataWrap[preKey].fields){\n                dataWrap[preKey] = {\n                    type: parseInt(key) == key ? 'array' : 'object',\n                    fields: {}\n                }\n            }\n            dataWrap = dataWrap[preKey].fields\n            preKey = key\n        }\n        dataWrap[lastKey] = valid\n    }\n    validate = (data, keyList, callback) => {\n        const {validator} = this.state\n        if(!validator || !data){\n            return\n        }\n        const options = {\n            firstFields: Array.isArray(keyList) ? [keyList.join('.')] : true\n        }\n        validator.validate(data, options, (errors, fields) => {\n            if(errors && fields){\n                let errors = fields\n                if(Array.isArray(keyList)){\n                    let key = keyList.join('.')\n                    errors = {\n                        [key]: fields[key]\n                    }\n                }\n                this.props.setErrors(errors, callback)\n            }else{\n                if(typeof keyList === 'undefined'){\n                    this.props.cancelErrors(callback)\n                }else{\n                    if(callback && callback instanceof Function){\n                        callback()\n                    }\n                }\n            }\n        })\n    }\n    render(){\n        return <div className=\"Validator\">\n            {this.props.children}\n        </div>\n    }\n}\n\nexport class ValidItem extends Component {\n    constructor(props){\n        super(props)\n        this.state = {}\n    }\n    render(){\n        const {error} = this.props\n        return <div>\n            {this.props.children}\n            {\n                (error && error.length > 0) &&  \n                <p className=\"message-hint-area\">{error[0].message}</p>\n            }\n        </div>\n    }\n}","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, {Component} from 'react'\nimport {getLastKeyValue, cloneData, getAssistDataKey} from './utils/common'\nimport Form from './index'\nimport {ValidItem} from './Validator'\nimport './form.less'\n\nexport default class FormItem extends Component {\n    // 点击事件\n    handleChange = (keyList, value, success, config, param) => {\n        if(config && config.modifyDataFn && config.modifyDataFn instanceof Function){\n            config.modifyDataFn({\n                changeFn: (data, success) => {\n                    this.modifyDataFn(keyList, data, config ,success)\n                },\n                changeDataFn: (key, data, success) => {\n                    if(key){\n                        let curKeyList = []\n                        if(key.includes('.')){\n                            curKeyList = key.split('.')\n                        }else{\n                            curKeyList = [key]\n                        }\n                        this.modifyDataFn(curKeyList, data, config, success)\n                    }else{\n                        this.props.modifyAllData(data, success)\n                    }\n                }\n            }, param)\n        }else{\n            this.modifyDataFn(keyList, value, config, success)\n        }\n    }\n    // 修改数据\n    modifyDataFn = (keyList, value, config, success) => {\n        const {submitFn} = this.props\n        this.props.modifyFn(keyList, value, (data) => {\n            if(!config.preventSubmit && submitFn && submitFn instanceof Function){\n                submitFn(data)\n            }\n            if(success && success instanceof Function){\n                success(data)\n            }\n        })\n    }\n    // 失去焦点\n    loseFocus = (keyList) => {\n        this.props.loseFocusFn(keyList)\n    }\n    // 获得焦点\n    getFocus = (keyList) => {\n        this.props.getFocusFn(keyList)\n    }\n    // 添加item\n    handleAddItem = (keyList, config) => {\n        const {data} = this.props\n        const {lastData} = getLastKeyValue(data, keyList)\n        if(Array.isArray(lastData)){\n            lastData.push(config.addItem)\n        }\n        this.props.modifyAllData(data)\n    }\n    // 删除item\n    deleteItem = (keyList, idx) => {\n        const {data} = this.props\n        const {lastData} = getLastKeyValue(data, keyList)\n        if(Array.isArray(lastData)){\n            lastData.splice(idx, 1)\n        }\n        this.props.modifyAllData(data)\n    }\n    // 获取自定义的表单组件\n    getCustomFormItem = (config, data, keyList = [], childConfig) => {\n        const customComponents = Form.customComponents\n        const isHasCustom = customComponents.find(item => item.type === config.type)\n        if(isHasCustom){\n            const newConfig = {...isHasCustom, ...config, type: 'container'}\n            return this.getFormItem(newConfig, data, keyList, childConfig)\n        }else{\n            return this.getFormItem(config, data, keyList, childConfig)\n        }\n    }\n    // 校验组件的配置\n    validFormItemConfig = (config) => {\n        //console.log(config)\n    }\n    // 获取默认的表单组件\n    getFormItem = (config, data, keyList = [], childConfig = {}) => {\n        const {error, assistData} = this.props\n        const formType = config.type || 'input'\n        this.validFormItemConfig(config)\n        // 获取当前值\n        let dataKey = config.dataKey, keys = [], curValue = data\n        if(dataKey && dataKey.includes('.')){\n            keys = dataKey.split('.')\n            keys.forEach(key => {\n                keyList.push(key)\n                if(key && curValue){\n                    curValue = curValue[key]\n                }\n            })\n        }else {\n            keyList.push(dataKey)\n            curValue = curValue && curValue[dataKey]\n        }\n        if(Array.isArray(keyList) && keyList.includes('assistData')){\n            const newKeyList = getAssistDataKey(keyList)\n            const {lastData} = getLastKeyValue(assistData, newKeyList)\n            curValue = lastData\n        }\n        const keyStr = Array.isArray(keyList) ? keyList.join('.') : config.dataKey\n        const errorClassName = error[keyStr] ? 'error-style' : ''\n        const formItems = {\n            'input': <input \n                className={`input-component form-item ${errorClassName}`} \n                value={curValue} \n                placeholder={config.placeholder || ''}\n                onFocus={() => this.getFocus(keyList)}\n                onBlur={() => this.loseFocus(keyList)}\n                onChange={(event) => this.handleChange(keyList, event.target.value, () => {}, config)}/>,\n            'textarea': <textarea \n                className={`textarea-component form-item ${errorClassName}`}\n                value={curValue} \n                placeholder={config.placeholder || ''}\n                onBlur={() => this.loseFocus(keyList)}\n                onFocus={() => this.getFocus(keyList)}\n                onChange={(event) => this.handleChange(keyList, event.target.value, () => {}, config)} \n                ></textarea>,\n            'select': <select \n                className={`select-component form-item ${errorClassName}`}\n                value={curValue}\n                onClick={() => this.getFocus(keyList)}\n                onChange={(event) => {\n                    this.handleChange(keyList, event.target.value, (data) => {\n                        this.loseFocus(keyList)\n                    }, config)\n                }} >\n                {\n                    Array.isArray(config.options) && config.options.map((item, idx) => {\n                        const label = typeof item === 'string' ? item : item.label\n                        const value = typeof item === 'string' ? item : item.value\n                        return <option key={idx} className=\"option-item\" value={value}>{label}</option>\n                    })\n                }\n            </select>,\n            'form_array': <div className=\"form-list-area\">\n                {\n                    Array.isArray(curValue) && curValue.map((group, groupIdx) => {\n                        return <div key={groupIdx} className=\"form-list\">\n                            {\n                                config.children && config.children.map((item, idx) => {\n                                    const newKeyList = [...keyList, groupIdx]\n                                    return <React.Fragment key={idx}>\n                                        {this.getFormItemWrap(item, curValue[groupIdx], newKeyList, {\n                                            childType: 'children',\n                                            index: groupIdx,\n                                            parentKey: config.dataKey,\n                                            parentData: curValue,\n                                            parentConfig: config\n                                        })}\n                                    </React.Fragment>\n                                })\n                            }\n                            {\n                                !config.hideBtn && \n                                <div className=\"operation-btn-area\">\n                                    {\n                                        (groupIdx === curValue.length - 1) && \n                                        <span className=\"operation-btn\" onClick={() => this.handleAddItem(keyList, config)}>添加</span>\n                                    }\n                                    {\n                                        curValue.length > 1 &&\n                                        <span className=\"operation-btn\" onClick={() => this.deleteItem(keyList, groupIdx)}>删除</span>\n                                    }\n                                </div>\n                            }\n                        </div>\n                    })\n                }\n            </div>,\n            'container': <React.Fragment>\n                {\n                    config.render && config.render(curValue, {...config, ...childConfig}, {\n                        changeFn: (data, success) => {\n                            const param = {\n                                parent: childConfig,\n                                self: {\n                                    ...config,\n                                    curData: data,\n                                    preData: curValue\n                                }\n                            }\n                            this.handleChange(keyList, data ,success, config, param)\n                        },\n                        changeDataFn: (key, data, success) => {\n                            const param = {\n                                parent: childConfig,\n                                self: {\n                                    ...config,\n                                    curData: data,\n                                    preData: curValue\n                                }\n                            }\n                            if(key){\n                                let curKeyList = []\n                                if(key.includes('.')){\n                                    curKeyList = key.split('.')\n                                }else{\n                                    curKeyList = [key]\n                                }\n                                this.handleChange(curKeyList, data, success, config, param)\n                            }else{\n                                this.props.modifyAllData(data, success)\n                            }\n                        },\n                        getFocus: () => {\n                            this.getFocus(keyList)\n                        },\n                        loseFocus: () => {\n                            this.loseFocus(keyList)\n                        },\n                        JSONForm: (configArray) => {\n                            if(!configArray || \n                                !Array.isArray(configArray) || \n                                configArray.length === 0){\n                                    return ''\n                                }\n                            return configArray.map((item, idx) => {\n                                let newKeyList = cloneData(keyList)\n                                if(item.dataKey && item.dataKey.includes('.')){\n                                    newKeyList = newKeyList.concat(item.dataKey.split('.'))\n                                }else if(item.dataKey){\n                                    newKeyList.push(item.dataKey)\n                                }\n                                this.props.refreshValid(newKeyList, item)\n                                return <React.Fragment key={idx}>\n                                    {\n                                        this.getFormItemWrap(item, curValue, cloneData(keyList), {\n                                            childType: 'children',\n                                            parentKey: config.dataKey,\n                                            parentData: curValue,\n                                            parentConfig: config\n                                        })\n                                    }\n                                </React.Fragment>\n                            })\n                        },\n                        error: error[keyStr],\n                        assistData: this.props.assistData,\n                        data: this.props.data,\n                    })\n                }\n            </React.Fragment>\n        }\n        return formItems[formType] || formItems['input']\n    }\n    getFormItemWrap = (config, data, keyList, childConfig) => {\n        const {error} = this.props\n        const higherType = ['textarea', 'form_array']\n        const childElement = <div className=\"form-group\">\n            {\n                (config && config.label) && \n                <label className={higherType.includes(config.type) ? 'label higher' : 'label'}><span>{config.label || ''}</span>：</label>\n            }\n            {\n                this.getCustomFormItem(config, data, keyList, childConfig)\n            }\n        </div>\n        if(childConfig && childConfig.childType === 'children'){\n            const keyStr = Array.isArray(keyList) ? keyList.join('.') : config.dataKey\n            return  <div className=\"form-item-wrap\" style={config.style}>\n                <ValidItem error={error[keyStr]}>\n                    {childElement}\n                </ValidItem>\n            </div>\n        }\n        return childElement\n    }\n    render(){\n        const {config, data} = this.props\n        const keyList = []\n        return this.getFormItemWrap(config, data, keyList)\n    }\n}","import React, {Component} from 'react'\nimport FormItem from './FormItem'\nimport PropTypes from 'prop-types'\nimport Validator, {ValidItem} from './Validator'\nimport {cloneData, getDataWrap, getAssistDataKey} from './utils/common'\nimport './form.less'\n\nexport default class From extends Component {\n    static propTypes = {\n        config: PropTypes.object\n    }\n    static defaultProps = {\n        config: {\n            data: {},\n            config: []\n        }\n    }\n    constructor(props){\n        super(props)\n        this.state = {\n            data: cloneData(props.config.data) || {},\n            assistData: cloneData(props.config.assistData) || {},\n            errors: {},\n        }\n    }\n    // 自定义组件存储\n    static customComponents = []\n    // 初始化自定义组件\n    static createCustomComp = (customComp) => {\n        if(customComp && Array.isArray(customComp)){\n            customComp.forEach(item => {\n                if(item.render && item.type && From.customComponents.every(child => child.type !== item.type)){\n                    From.customComponents.push(item)\n                }\n            })\n        }\n    }\n    componentDidMount(){\n        this.getStoreData(this.props)\n    }\n    componentWillReceiveProps(nextProps){\n        if(nextProps.config && nextProps.config !== this.props.config){\n            this.getStoreData(nextProps)\n        }\n    }\n    // 读取缓存数据\n    getStoreData = (props) => {\n        const {config} = props\n        if(config.formKey && typeof config.formKey === 'string'){\n            const dataStr = window.localStorage.getItem(config.formKey)\n            let storeData = {}\n            try{\n                storeData = JSON.parse(dataStr) || {}\n            }catch(err){\n                console.log(err)\n            }\n            // if(['{}', '[]'].includes(JSON.stringify(storeData))){\n            //     return\n            // }\n            let newData = {...cloneData(props.config.data), ...storeData}\n            this.setState({data: newData}, () => {\n                this.validator.refresh()\n            })\n        }   \n    }\n    // 修改表单数据\n    modifyFn = (keyList, value, success) => {\n        const {data, assistData} = this.state\n        const {config} = this.props\n        const newData = cloneData(data)\n        const newAssistData = cloneData(assistData)\n        if(Array.isArray(keyList) && keyList.includes('assistData')){\n            const assistKeyList = getAssistDataKey(keyList)\n            const {dataWrap, lastKey} = getDataWrap(newAssistData, assistKeyList)\n            dataWrap[lastKey] = value\n        }else{\n            const {dataWrap, lastKey} = getDataWrap(newData, keyList)\n            dataWrap[lastKey] = value\n        }\n        this.setState({\n            data: newData,\n            assistData: newAssistData\n        }, () => {\n            if(config.formKey && typeof config.formKey === 'string'){\n                window.localStorage.setItem(config.formKey, JSON.stringify(this.state.data))\n            }   \n            if(success && success instanceof Function){\n                success(this.state.data)\n            }\n        })\n    }\n    // 整体替换表单的值\n    modifyAllData = (data, success) => {\n        const {config} = this.props\n        this.setState({data,}, () => {\n            this.validator.refresh()\n            if(config.formKey && typeof config.formKey === 'string'){\n                window.localStorage.setItem(config.formKey, JSON.stringify(this.state.data))\n            }\n            if(success && success instanceof Function){\n                success()\n            }\n        })\n    }\n    // 获取表单的值\n    getValue = (callback) => {\n        this.validator.validate(this.state.data, undefined, () => {\n            const {errors, data} = this.state\n            if(callback && callback instanceof Function){\n                callback(JSON.stringify(errors) === '{}', data)\n            }\n        })\n    }\n    // 注册表单的提交函数\n    registerSubmit = (callback) => {\n        this.submitFn = (data) => {\n            this.validator.validate(data, undefined, () => {\n                const {errors, data} = this.state\n                if(callback && callback instanceof Function){\n                    callback(JSON.stringify(errors) === '{}', data)\n                }\n            })\n        }\n    }\n    // 表单失去焦点\n    handleLoseFocusFn = (keyList) => {\n        this.validator.validate(this.state.data, keyList)\n    }\n    // 表单获得焦点\n    handleGetFocusFn = (keyList) => {\n        const {errors} = this.state\n        const keyStr = Array.isArray(keyList) ? keyList.join('.') : ''\n        if(errors[keyStr]){\n            errors[keyStr] = undefined\n            this.setState({errors,})\n        }\n    }\n    // 设置报错信息\n    setErrors = (newError, callback) => {\n        const {errors} = this.state\n        this.setState({errors: {...errors, ...newError}}, () => {\n            if(callback && callback instanceof Function){\n                callback()\n            }\n        })\n    }\n    // 清空errors\n    cancelErrors = (callback) => {\n        this.setState({errors: {}}, () => {\n            if(callback && callback instanceof Function){\n                callback()\n            }\n        })\n    }\n    // 更新校验rules\n    refreshValid = (keyList, itemConfig) => {\n        if(!this.validator){\n            setTimeout(() => {\n                this.refreshValid(keyList, itemConfig)\n            }, 10)\n            return\n        }\n        this.validator.refreshValid(keyList, itemConfig)\n    }\n    render(){\n        const {config} = this.props\n        const {data, assistData, errors} = this.state\n        return <div className={`configurable-form-area ${config.className ? config.className : ''}`}>\n            <Validator config={config.config} \n                setErrors={this.setErrors} \n                cancelErrors={this.cancelErrors} \n                data={data} ref={ref => this.validator = ref}>\n                {\n                    Array.isArray(config.config) && config.config.map((item, idx) => {\n                        return <div className=\"form-item-wrap\" key={idx} style={item.style}>\n                            <ValidItem error={errors[item.dataKey]}>\n                                <FormItem \n                                    config={item} \n                                    data={data}\n                                    assistData={assistData}\n                                    modifyAllData={this.modifyAllData}\n                                    modifyFn={this.modifyFn}\n                                    submitFn={this.submitFn}\n                                    refreshValid={this.refreshValid}\n                                    loseFocusFn={this.handleLoseFocusFn}\n                                    error={errors}\n                                    getFocusFn={this.handleGetFocusFn}/>\n                            </ValidItem>\n                        </div>\n                    })\n                }\n            </Validator>\n        </div>\n    }\n}"],"names":["cloneData","data","Array","isArray","map","item","Object","keys","newData","forEach","key","getAssistDataKey","keyList","length","includes","index","indexOf","filter","idx","getDataWrap","preKey","dataWrap","lastKey","i","curKey","getLastKeyValue","lastData","rulesString","type","msg","mag","Validator","props","state","refresh","nextProps","config","React","children","Component","rules","newRules","getRules","setState","createValidator","validator","Schema","refreshValid","validate","valid","analyValidate","addDeepValidator","dataKey","split","subRules","childRules","child","childIdx","fields","rule","find","subRule","push","label","RegExp","Function","len","parseInt","callback","options","join","errors","setErrors","cancelErrors","ValidItem","error","message","FormItem","handleChange","value","success","param","modifyDataFn","curKeyList","modifyAllData","submitFn","modifyFn","preventSubmit","loseFocus","loseFocusFn","getFocus","getFocusFn","handleAddItem","addItem","deleteItem","splice","getCustomFormItem","childConfig","customComponents","Form","isHasCustom","newConfig","getFormItem","validFormItemConfig","assistData","formType","curValue","newKeyList","keyStr","errorClassName","formItems","placeholder","event","target","group","groupIdx","getFormItemWrap","hideBtn","render","configArray","concat","higherType","childElement","childType","style","From","getStoreData","className","ref","handleLoseFocusFn","handleGetFocusFn","propTypes","PropTypes","object","defaultProps","createCustomComp","customComp","every","formKey","dataStr","window","localStorage","getItem","storeData","JSON","parse","err","log","newAssistData","assistKeyList","setItem","stringify","getValue","undefined","registerSubmit","newError","itemConfig"],"mappings":"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"}